"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[891],{956:function(a,o,r){r.d(o,{A:function(){return y}});var i=r(6768),s=r(4232);const t={class:"main"},l={key:0,class:"colunas"},n={class:"colunaEsquerda"},e={class:"colunaSaldo"},d={class:"saldo"},c={class:"precoProduto"},u={class:"saldoFinal"},v={class:"colunaDireita"},p={class:"carrinho"},k={class:"listaLivros"},h=["src","alt"],m={class:"detalhes"},L={class:"tituloLivro"},C={class:"quantidade"},f={key:1,class:"comprado"};function g(a,o,r,g,q,_){const b=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",t,[q.compradoComSucesso?((0,i.uX)(),(0,i.CE)("div",f,[o[8]||(o[8]=(0,i.Lk)("h1",null,"Compra realizada com sucesso!",-1)),(0,i.Lk)("p",null,[o[7]||(o[7]=(0,i.eW)("Veja seus livros adquiridos: ")),(0,i.bF)(b,{class:"link",to:"/minhasCompras"},{default:(0,i.k6)((()=>o[6]||(o[6]=[(0,i.eW)("aqui")]))),_:1})])])):((0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",n,[o[5]||(o[5]=(0,i.Lk)("label",{class:"tituloColuna"},"Seu saldo",-1)),(0,i.Lk)("div",e,[(0,i.Lk)("span",d,"R$ "+(0,s.v_)(q.saldoCliente),1),(0,i.Lk)("button",{class:"botaoAdd",onClick:o[0]||(o[0]=(...a)=>_.atualizarSaldo50&&_.atualizarSaldo50(...a))},"+ R$ 50")]),(0,i.Lk)("div",c,[o[3]||(o[3]=(0,i.Lk)("label",null,"Total da compra",-1)),(0,i.Lk)("span",null,"R$ "+(0,s.v_)(r.total),1)]),(0,i.Lk)("div",u,[o[4]||(o[4]=(0,i.Lk)("label",null,"Saldo final",-1)),(0,i.Lk)("span",null,"R$ "+(0,s.v_)(_.getSaldoFinal()),1)]),(0,i.Lk)("button",{class:"botaoConfirmar",onClick:o[1]||(o[1]=(...a)=>_.finalizarCompra&&_.finalizarCompra(...a))}," Finalizar compra ")]),(0,i.Lk)("div",v,[(0,i.Lk)("div",p,[(0,i.Lk)("ul",k,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.itens,((a,o)=>((0,i.uX)(),(0,i.CE)("li",{key:o,class:"itemLivro"},[(0,i.Lk)("img",{src:"http://localhost:8000"+a.livro.img,alt:"Capa do livro"+a.livro.titulo},null,8,h),(0,i.Lk)("div",m,[(0,i.Lk)("span",L,(0,s.v_)(a.livro.titulo),1),(0,i.Lk)("span",C,"x"+(0,s.v_)(a.quantidade??1),1)])])))),128))])])])])),(0,i.Lk)("div",{class:"fecharCompra",onClick:o[2]||(o[2]=(...a)=>_.fecharCompra&&_.fecharCompra(...a))},"X")])}var q=r(6373),_={name:"TelaPagamento",props:{itens:{type:Array,required:!0},total:{type:String,required:!0}},data(){return{saldoCliente:0,compradoComSucesso:!1}},async created(){try{const a=await(0,q.UY)();this.saldoCliente=parseFloat(a.data)}catch(a){console.error("Erro ao buscar saldo:",a)}},methods:{async finalizarCompra(){await Promise.all(this.itens.map((({livro:a,quantidade:o})=>this.$store.dispatch("comprarLivro",{idLivro:a.id,quantidade:o})))),await this.$store.dispatch("carregarItensCarrinho");const{data:a}=await(0,q.UY)();this.saldoCliente=Number(a.saldo??a),this.compradoComSucesso=!0},getSaldoFinal(){const a=(this.saldoCliente-parseFloat(this.total)).toFixed(2);return a},async atualizarSaldo50(){await(0,q.M0)();const a=await(0,q.UY)();this.saldoCliente=parseFloat(a.data)},fecharCompra(){this.$emit("confirmarCompra")}}},b=r(1241);const E=(0,b.A)(_,[["render",g],["__scopeId","data-v-2283059a"]]);var y=E},8891:function(a,o,r){r.r(o),r.d(o,{default:function(){return M}});var i=r(6768),s=r(4232);const t={class:"containerPagProduto"},l={class:"conteudoEsquerda"},n={class:"imgProduto"},e=["src","alt"],d={class:"metadados"},c={class:"quadradosInfos"},u={class:"quadrado"},v={class:"quadrado"},p={class:"quadrado"},k={class:"quadradosInfos"},h={class:"quadrado"},m={class:"quadrado"},L={class:"quadrado"},C={key:0,class:"conteudoDireita"},f={class:"titulo"},g={key:0,class:"avaliacoes"},q={class:"descricao scrollMinimalista"},_={class:"preco"},b={key:1,class:"botoes"},E={key:2,class:"botao semEstoque"},y={key:1,class:"adicionadoAoCarrinho"},A={key:2,class:"finalizarCompra"};function S(a,o,r,S,P,X){const F=(0,i.g2)("AvaliacaoEstrelas"),$=(0,i.g2)("router-link"),z=(0,i.g2)("TelaPagamento");return(0,i.uX)(),(0,i.CE)("div",t,[(0,i.Lk)("div",l,[(0,i.Lk)("div",n,[(0,i.Lk)("img",{src:"http://localhost:8000"+X.livro.img,alt:"Capa do livro "+X.livro.titulo},null,8,e)]),(0,i.Lk)("div",d,[(0,i.Lk)("div",c,[(0,i.Lk)("div",u,[o[2]||(o[2]=(0,i.Lk)("strong",null,"Autor",-1)),(0,i.Lk)("span",null,(0,s.v_)(X.livro.autor),1)]),(0,i.Lk)("div",v,[o[3]||(o[3]=(0,i.Lk)("strong",null,"Editora",-1)),(0,i.Lk)("span",null,(0,s.v_)(X.livro.editora),1)]),(0,i.Lk)("div",p,[o[4]||(o[4]=(0,i.Lk)("strong",null,"Idioma",-1)),(0,i.Lk)("span",null,(0,s.v_)(X.livro.idioma),1)])]),(0,i.Lk)("div",k,[(0,i.Lk)("div",h,[o[5]||(o[5]=(0,i.Lk)("strong",null,"Páginas",-1)),(0,i.Lk)("span",null,(0,s.v_)(X.livro.qtdPaginas),1)]),(0,i.Lk)("div",m,[o[6]||(o[6]=(0,i.Lk)("strong",null,"Estoque",-1)),(0,i.Lk)("span",null,(0,s.v_)(X.livro.estoque),1)]),(0,i.Lk)("div",L,[o[7]||(o[7]=(0,i.Lk)("strong",null,"Lançamento",-1)),(0,i.Lk)("span",null,(0,s.v_)(X.livro.dataLancamento),1)])])])]),P.adicionadoAoCarrinho?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("span",null,[o[11]||(o[11]=(0,i.eW)(' O livro "')),(0,i.Lk)("strong",null,(0,s.v_)(X.livro.titulo),1),o[12]||(o[12]=(0,i.eW)('" foi adicionado ao seu ')),(0,i.bF)($,{to:"/carrinho"},{default:(0,i.k6)((()=>o[10]||(o[10]=[(0,i.eW)(" carrinho!")]))),_:1})])])):((0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("div",f,(0,s.v_)(X.livro.titulo),1),X.livro.qtdVendas>0?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)(F,{rating:X.livro.avaliacaoGeral},null,8,["rating"]),(0,i.eW)(" ("+(0,s.v_)(X.livro.qtdAvaliacoes)+")",1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",q,(0,s.v_)(X.livro.descricao),1),(0,i.Lk)("div",_,"R$ "+(0,s.v_)(X.livro.preco),1),X.livro.estoque>0?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.Lk)("div",{class:"botao carrinho",onClick:o[0]||(o[0]=(...a)=>X.adicionarLivroCarrinho&&X.adicionarLivroCarrinho(...a))},o[8]||(o[8]=[(0,i.Lk)("b",null,"Adicionar ao carrinho",-1)])),(0,i.Lk)("div",{class:"botao compra",onClick:o[1]||(o[1]=(...a)=>X.irParaCompra&&X.irParaCompra(...a))},o[9]||(o[9]=[(0,i.Lk)("b",null,"Comprar agora",-1)]))])):((0,i.uX)(),(0,i.CE)("div",E,"Sem estoque no momento :("))])),P.finalizarCompra?((0,i.uX)(),(0,i.CE)("div",A,[(0,i.bF)(z,{itens:[{livro:X.livro}],total:X.livro.preco,onConfirmarCompra:X.fecharCompra},null,8,["itens","total","onConfirmarCompra"])])):(0,i.Q3)("",!0)])}const P={class:"star-rating"};function X(a,o,r,t,l,n){return(0,i.uX)(),(0,i.CE)("div",P,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(5,(a=>(0,i.Lk)("span",{key:a,class:(0,s.C4)(["star",{"star-filled":a<=n.filledStars,"star-half":a===n.halfStarPosition}])}," ★ ",2))),64))])}var F={name:"StarRating",props:{rating:{type:Number,default:0}},computed:{filledStars(){return Math.floor(this.rating)},halfStarPosition(){const a=this.rating-Math.floor(this.rating);return a>=.5&&a<1?Math.ceil(this.rating):-1}}},$=r(1241);const z=(0,$.A)(F,[["render",X],["__scopeId","data-v-61e81109"]]);var I=z,w=r(956),R={components:{AvaliacaoEstrelas:I,TelaPagamento:w.A},created(){this.$store.dispatch("carregarDetalhesLivro",this.idLivro),this.adicionadoAoCarrinho=!1},methods:{entrarRotaProtegida(){this.$store.dispatch("visitaRotaProtegida")},adicionarLivroCarrinho(){this.$store.dispatch("adicionarAoCarrinho",this.idLivro).then((()=>{this.$store.dispatch("carregarItensCarrinho")})).catch((a=>{console.error("Erro ao adicionar livro:",a)})),this.adicionadoAoCarrinho=!0},irParaCompra(){this.finalizarCompra=!0},fecharCompra(){this.finalizarCompra=!1}},computed:{livro(){return this.$store.getters.getDetalhesLivro}},data(){return{idLivro:this.$route.params.idLivro,adicionadoAoCarrinho:!1,finalizarCompra:!1}}};const W=(0,$.A)(R,[["render",S],["__scopeId","data-v-a15e2b8c"]]);var M=W}}]);
//# sourceMappingURL=891.7132fc44.js.map