"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[889],{5889:function(a,e,t){t.r(e),t.d(e,{default:function(){return y}});var s=t(6768);const i={class:"containerPai"};function n(a,e,t,n,o,r){const l=(0,s.g2)("MeuPerfilComponent");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(l)])}var o=t(4232),r=t(5130);const l={class:"pai"},u={class:"campoGrande"},m={class:"campoMetade"},d={class:"dataNascimento"},c={class:"data"},h=["value"],p=["value"],f=["value"],v={class:"campoGrande"},g={class:"campoMetade"},S=["disabled"];function U(a,e,t,i,n,U){return(0,s.uX)(),(0,s.CE)("div",l,[n.mensagem?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["alerta",n.tipoMensagem])},(0,o.v_)(n.mensagem),3)):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:"containerFilho",style:(0,o.Tr)(U.containerStyle)},[(0,s.Lk)("div",{class:"iconePerfil",style:(0,o.Tr)(U.avatarStyle)},(0,o.v_)(U.inicialUsuario),5),(0,s.Lk)("div",u,[e[10]||(e[10]=(0,s.Lk)("label",null,"Username",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>U.infosUsuario.username=a)},null,512),[[r.Jo,U.infosUsuario.username]])]),(0,s.Lk)("div",m,[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"Nome","onUpdate:modelValue":e[1]||(e[1]=a=>U.infosUsuario.first_name=a)},null,512),[[r.Jo,U.infosUsuario.first_name]]),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"Sobrenome","onUpdate:modelValue":e[2]||(e[2]=a=>U.infosUsuario.last_name=a)},null,512),[[r.Jo,U.infosUsuario.last_name]])]),(0,s.Lk)("div",d,[e[11]||(e[11]=(0,s.Lk)("label",null,"Data de nascimento:",-1)),(0,s.Lk)("div",c,[(0,s.bo)((0,s.Lk)("select",{class:"input","onUpdate:modelValue":e[3]||(e[3]=a=>n.diaNascimento=a),required:""},[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(31,(a=>(0,s.Lk)("option",{key:a,value:a},(0,o.v_)(a),9,h))),64))],512),[[r.u1,n.diaNascimento]]),(0,s.bo)((0,s.Lk)("select",{class:"input","onUpdate:modelValue":e[4]||(e[4]=a=>n.mesNascimento=a),required:""},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.meses,((a,e)=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e<9?"0"+(e+1):e+1},(0,o.v_)(a),9,p)))),128))],512),[[r.u1,n.mesNascimento]]),(0,s.bo)((0,s.Lk)("select",{class:"input","onUpdate:modelValue":e[5]||(e[5]=a=>n.anoNascimento=a),required:""},[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(100,(a=>(0,s.Lk)("option",{key:a,value:2024-a},(0,o.v_)(2024-a),9,f))),64))],512),[[r.u1,n.anoNascimento]])])]),(0,s.Lk)("div",v,[e[12]||(e[12]=(0,s.Lk)("label",null,"Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>U.infosUsuario.email=a)},null,512),[[r.Jo,U.infosUsuario.email]])]),(0,s.Lk)("div",g,[(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"Nova senha","onUpdate:modelValue":e[7]||(e[7]=a=>n.novaSenha=a)},null,512),[[r.Jo,n.novaSenha]]),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"Repetir nova senha","onUpdate:modelValue":e[8]||(e[8]=a=>n.repetirSenha=a)},null,512),[[r.Jo,n.repetirSenha]])]),(0,s.Lk)("button",{class:(0,o.C4)(["btnSalvar",{desabilitado:!U.formAlterado}]),disabled:!U.formAlterado,type:"button",onClick:e[9]||(e[9]=(...a)=>U.salvar&&U.salvar(...a))}," Salvar ",10,S)],4)])}var N={data(){return{meses:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],diaNascimento:null,mesNascimento:null,anoNascimento:null,novaSenha:"",repetirSenha:"",mensagem:"",tipoMensagem:"",originalInfo:null}},computed:{infosUsuario(){return this.$store.getters.getInfosUsuario},corAvatar(){return this.$store.getters.getCorAvatar},inicialUsuario(){const a=this.$store.getters.getNomeUsuario||"";return a.charAt(0).toUpperCase()},avatarColorHex(){const a={blue:"#0000FF",green:"#008000",red:"#FF0000",purple:"#800080",orange:"#FFA500"};return a[this.corAvatar]||this.corAvatar||"#999"},avatarStyle(){return{backgroundColor:this.avatarColorHex}},containerStyle(){const a=this.avatarColorHex;return{border:`2px solid ${a}80`,boxShadow:`0 0 2px ${a}CC, 0 0 6px ${a}99, 0 0 12px ${a}66, 0 0 24px ${a}33`}},dataOriginalISO(){return this.originalInfo?.dataNascimento||""},dataAtualISO(){return this.anoNascimento&&this.mesNascimento&&this.diaNascimento?this.anoNascimento+"-"+String(this.mesNascimento).padStart(2,"0")+"-"+String(this.diaNascimento).padStart(2,"0"):""},formAlterado(){return!!this.originalInfo&&(this.infosUsuario.username!==this.originalInfo.username||this.infosUsuario.first_name!==this.originalInfo.first_name||this.infosUsuario.last_name!==this.originalInfo.last_name||this.infosUsuario.email!==this.originalInfo.email||this.dataAtualISO!==this.dataOriginalISO||""!==this.novaSenha||""!==this.repetirSenha)}},watch:{infosUsuario:{immediate:!0,handler(a){a&&!this.originalInfo&&(this.originalInfo=JSON.parse(JSON.stringify(a)))}},"infosUsuario.dataNascimento":{immediate:!0,handler(a){if(!a)return;const[e,t,s]=a.split("-");this.diaNascimento=Number(s),this.mesNascimento=t,this.anoNascimento=e}}},created(){this.$store.dispatch("getCliente")},methods:{async salvar(){if(this.novaSenha&&this.novaSenha!==this.repetirSenha)return this.mensagem="As senhas não são iguais.",void(this.tipoMensagem="erro");const a=String(this.diaNascimento).padStart(2,"0")+"/"+this.mesNascimento+"/"+this.anoNascimento,e={username:this.infosUsuario.username,first_name:this.infosUsuario.first_name,last_name:this.infosUsuario.last_name,email:this.infosUsuario.email,dataNascimento:a,password:this.novaSenha||void 0};try{await this.$store.dispatch("atualizarInfosUsuario",e),this.mensagem="Dados atualizados com sucesso!",this.tipoMensagem="sucesso",this.novaSenha=this.repetirSenha="",this.originalInfo=JSON.parse(JSON.stringify(this.infosUsuario)),this.originalInfo.dataNascimento=this.dataAtualISO}catch(t){this.mensagem=t.message||"Erro inesperado.",this.tipoMensagem="erro"}}}},k=t(1241);const b=(0,k.A)(N,[["render",U],["__scopeId","data-v-0a3584cc"]]);var C=b,I={components:{MeuPerfilComponent:C}};const L=(0,k.A)(I,[["render",n],["__scopeId","data-v-4c35c25f"]]);var y=L}}]);
//# sourceMappingURL=889.fa0e0c13.js.map